<br/>

<!-- TOC -->

- [例题](#例题)
- [进程和线程区别](#进程和线程区别)
- [进程间通信](#进程间通信)
- [线程同步的方式](#线程同步的方式)
- [临界资源与临界区](#临界资源与临界区)
- [死锁四个必要条件](#死锁四个必要条件)
    - [死锁原因](#死锁原因)
    - [死锁处理](#死锁处理)
- [生产者和消费者](#生产者和消费者)
- [分页和分段的区别](#分页和分段的区别)
- [操作系统的四个特性](#操作系统的四个特性)
- [操作系统的主要功能](#操作系统的主要功能)
- [进程同步](#进程同步)
- [进程调度算法](#进程调度算法)
- [页面置换算法](#页面置换算法)

<!-- /TOC -->

<br/>

### 例题

某文件占10个磁盘块，现要把该文件磁盘块逐个读入主存缓冲区，并送用户区进行分析。假设一个缓冲区与一个磁盘块大小相同，把一个磁盘块读入缓冲区时间为80μs，将缓冲区的数据传送到用户区的时间是60μs，CPU对一块数据进行分析的时间为40μs。在单缓冲区和双缓冲区结构下，读入并分析完该文件的时间分别是（）。

1440μs，900μs

 <br/>

解析： 

单缓冲区总时间=(磁盘写入缓冲区时间+缓冲区读出时间)*磁盘块数+CPU处理最后一块数据的时间=(80+60)*10+40=1440us

 <br/>

双缓冲总时间=磁盘写入缓冲区时间*磁盘块数+读出最后一块数据时间+CPU分析最后一块数据时间=80*10+60+40=900us

------

<br/>

### 进程和线程区别

进程是对运行时程序的封装，是系统进行资源调度和分配的的基本单位，实现了操作系统的并发；

线程是进程的子任务，是CPU调度和分派的基本单位，用于保证程序的 实时性，实现进程内部的并发；

一个程序至少有一个进程，一个进程至少有一个线程，线程依赖于进程而存在；

进程在执行过程中拥有独立的内存单元，而多个线程共享进程的内存。

<br/>

### 进程间通信

1. 管道（pipe）及命名管道（named pipe）：管道可用于具有亲缘关系的父子进程间的通信，有名管道除了具有管道所具有的功能外，它还允许无亲缘关系进程间的通信；
2. 信号（signal）：信号是一种比较复杂的通信方式，用于通知接收进程某个事件已经发生；
3. 消息队列：消息队列是消息的链接表，它克服了上两种通信方式中信号量有限的缺点，具有写权限得进程可以按照一定得规则向消息队列中添加新信息；对消息队列有读权限得进程则可以从消息队列中读取信息；
4. 共享内存：可以说这是最有用的进程间通信方式。它使得多个进程可以访问同一块内存空间，不同进程可以及时看到对方进程中对共享内存中数据得更新。这种方式需要依靠某种同步操作，如互斥锁和信号量等；
5. 信号量：主要作为进程之间及同一种进程的不同线程之间得同步和互斥手段；
6. 套接字：这是一种更为一般得进程间通信机制，它可用于网络中不同机器之间的进程间通信，应用非常广泛。

<br/>

### 线程同步的方式

1.  互斥量 Synchronized/Lock：采用互斥对象机制，只有拥有互斥对象的线程才有访问公共资源的权限。因为互斥对象只有一个，所以可以保证公共资源不会被多个线程同时访问
2.  信号量 Semphare：它允许同一时刻多个线程访问同一资源，但是需要控制同一时刻访问此资源的最大线程数量
3.  事件(信号)，Wait/Notify：通过通知操作的方式来保持多线程同步，还可以方便的实现多线程优先级的比较操作

<br/>

### 临界资源与临界区

**临界资源是一次仅允许一个进程使用的共享资源。各进程采取互斥的方式，实现共享的资源称作临界资源。**属于临界资源的硬件有，打印机，磁带机等；软件有消息队列，变量，数组，缓冲区等。诸进程间采取互斥方式，实现对这种资源的共享。

**每个进程中访问临界资源的那段代码称为临界区**

<br/>

### 死锁四个必要条件

1. 互斥：至少有一个资源必须属于非共享模式，即一次只能被一个进程使用；若其他申请使用该资源，那么申请进程必须等到该资源被释放为止；
2. 占有并等待：一个进程必须占有至少一个资源，并等待另一个资源，而该资源为其他进程所占有；
3. 非抢占：进程不能被抢占，即资源只能被进程在完成任务后自愿释放
4. 循环等待：若干进程之间形成一种头尾相接的环形等待资源关系

<br/>

**死锁预防的基本思想是 只要确保死锁发生的四个必要条件中至少有一个不成立，就能预防死锁的发生**

<br/>

#### 死锁原因

1. 竞争资源：请求同一有限资源的进程数多于可用资源数
2. 进程推进顺序非法：进程执行中，请求和释放资源顺序不合理，如资源等待链

 <br/>

#### 死锁处理

**预防死锁**：破坏产生死锁的4个必要条件中的一个或者多个；实现起来比较简单，但是如果限制过于严格会降低系统资源利用率以及吞吐量

**避免死锁**：在资源的动态分配中，防止系统进入不安全状态(可能产生死锁的状态)-如**银行家算法**

**检测死锁**：允许系统运行过程中产生死锁，在死锁发生之后，采用一定的算法进行检测，并确定与死锁相关的资源和进程，采取相关方法清除检测到的死锁。实现难度大

**解除死锁**：与死锁检测配合，将系统从死锁中解脱出来（撤销进程或者剥夺资源）。对检测到的和死锁相关的进程以及资源，通过撤销或者挂起的方式，释放一些资源并将其分配给处于阻塞状态的进程，使其转变为就绪态。实现难度大

<br/>

### 生产者和消费者

特点

1. 生产者生产的时候消费者不能消费
2. 消费者消费的时候生产者不能生产
3. 缓冲区空时消费者不能消费
4. 缓冲区满时生产者不能生产

<br/>

### 分页和分段的区别

1.页是信息的物理单位，分页是由于系统管理的需要。段是信息的逻辑单位，分段是为了满足用户的要求。

2.页的大小固定且由系统决定，段的长度不固定，决定于用户所编写的程序，通常由编译程序在对源程序紧进行编译时，根据信息的性质来划分。

3.分页的作业的地址空间是一维的，程序员只需要利用一个记忆符，即可表示一个地址。分段的作业地址空间则是二维的，程序员在标识一个地址时，既需要给出段名，又需要给出段的地址值。

<br/>

### 操作系统的四个特性

**并发**：同一段时间内多个程序执行(注意区别并行和并发，前者是同一时刻的多个事件，后者是同一时间段内的多个事件)

**共享**：系统中的资源可以被内存中多个并发执行的进线程共同使用

**虚拟**：通过时分复用（如分时系统）以及空分复用（如虚拟内存）技术实现把一个物理实体虚拟为多个

**异步**：系统中的进程是以走走停停的方式执行的，且以一种不可预知的速度推进

<br/>

### 操作系统的主要功能

**处理机管理**：处理机分配都是以进程为单位，所以处理机管理也被看做是进程管理。包括进程控制，进程同步，进程通信和进程调度

**存储器管理（或者内存管理）**：内存分配，内存保护，地址映射，内存扩充

**设备管理**：管理所有外围设备，包括完成用户的IO请求；为用户进程分配IO设备；提高IO设备利用率；提高IO速度；方便IO的使用

**文件管理**：管理用户文件和系统文件，方便使用同时保证安全性。包括：磁盘存储空间管理，目录管理，文件读写管理以及文件共享和保护

**提供用户接口**：程序接口（如API）和用户接口（如GUI）

<br/>

### 进程同步

**空闲让进**：当没有进程处于临界区的时候，应该许可其他进程进入临界区的申请

**忙则等待**：当前如果有进程处于临界区，如果有其他进程申请进入，则必须等待，保证对临界区的互斥访问

**有限等待**：对要求访问临界资源的进程，需要在有限时间内进入临界区，防止出现死等

**让权等待**：当进程无法进入临界区的时候，需要释放处理机，边陷入忙等

<br/>

### 进程调度算法

1. 先来先服务调度算法FCFS
2. 短作业优先调度算法SJF
3. 高相应比算法HRN
4. 时间片轮转调度RR
5. 多级反馈队列调度算法

<br/>

### 页面置换算法

1. 最佳置换算法
2. 先进先出置换算法
3. 最近最久未使用算法LRU
4. 时钟算法clock(也被称为是最近未使用算法NRU)
5. 改进型Clock算法
6. 最少使用算法LFU

<br/>



















